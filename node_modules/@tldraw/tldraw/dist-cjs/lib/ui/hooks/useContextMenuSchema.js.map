{
  "version": 3,
  "sources": ["../../../../src/lib/ui/hooks/useContextMenuSchema.tsx"],
  "sourcesContent": ["import { Editor, track, useEditor, useValue } from '@tldraw/editor'\nimport React, { useMemo } from 'react'\nimport {\n\tTLUiMenuSchema,\n\tcompactMenuItems,\n\tmenuCustom,\n\tmenuGroup,\n\tmenuItem,\n\tmenuSubmenu,\n\tshowMenuPaste,\n\tuseAllowGroup,\n\tuseAllowUngroup,\n\tuseThreeStackableItems,\n} from './menuHelpers'\nimport { useActions } from './useActions'\nimport { useHasLinkShapeSelected } from './useHasLinkShapeSelected'\nimport { useOnlyFlippableShape } from './useOnlyFlippableShape'\nimport { useShowAutoSizeToggle } from './useShowAutoSizeToggle'\n\n/** @public */\nexport type TLUiContextTTLUiMenuSchemaContextType = TLUiMenuSchema\n\n/** @internal */\nexport const TLUiContextMenuSchemaContext = React.createContext(\n\t{} as TLUiContextTTLUiMenuSchemaContextType\n)\n\n/** @public */\nexport type TLUiContextMenuSchemaProviderProps = {\n\toverrides?: (\n\t\teditor: Editor,\n\t\tschema: TLUiContextTTLUiMenuSchemaContextType,\n\t\thelpers: {\n\t\t\tactions: ReturnType<typeof useActions>\n\t\t\toneSelected: boolean\n\t\t\ttwoSelected: boolean\n\t\t\tthreeSelected: boolean\n\t\t\tshowAutoSizeToggle: boolean\n\t\t\tshowUngroup: boolean\n\t\t\tonlyFlippableShapeSelected: boolean\n\t\t}\n\t) => TLUiContextTTLUiMenuSchemaContextType\n\tchildren: any\n}\n\n/** @internal */\nexport const TLUiContextMenuSchemaProvider = track(function TLUiContextMenuSchemaProvider({\n\toverrides,\n\tchildren,\n}: TLUiContextMenuSchemaProviderProps) {\n\tconst editor = useEditor()\n\tconst actions = useActions()\n\n\tconst showAutoSizeToggle = useShowAutoSizeToggle()\n\n\tconst onlyFlippableShapeSelected = useOnlyFlippableShape()\n\n\tconst selectedCount = editor.selectedShapeIds.length\n\n\tconst oneSelected = selectedCount > 0\n\n\tconst twoSelected = selectedCount > 1\n\tconst threeSelected = selectedCount > 2\n\tconst threeStackableItems = useThreeStackableItems()\n\tconst atLeastOneShapeOnPage = useValue(\n\t\t'atLeastOneShapeOnPage',\n\t\t() => editor.currentPageShapeIds.size > 0,\n\t\t[]\n\t)\n\tconst isTransparentBg = useValue(\n\t\t'isTransparentBg',\n\t\t() => editor.instanceState.exportBackground,\n\t\t[]\n\t)\n\tconst allowGroup = useAllowGroup()\n\tconst allowUngroup = useAllowUngroup()\n\tconst hasClipboardWrite = Boolean(window.navigator.clipboard?.write)\n\tconst showEditLink = useHasLinkShapeSelected()\n\tconst { onlySelectedShape } = editor\n\tconst isShapeLocked = onlySelectedShape && editor.isShapeOrAncestorLocked(onlySelectedShape)\n\n\tconst contextTLUiMenuSchema = useMemo<TLUiMenuSchema>(() => {\n\t\tlet contextTLUiMenuSchema: TLUiContextTTLUiMenuSchemaContextType = compactMenuItems([\n\t\t\tmenuGroup(\n\t\t\t\t'selection',\n\t\t\t\tshowAutoSizeToggle && menuItem(actions['toggle-auto-size']),\n\t\t\t\tshowEditLink && !isShapeLocked && menuItem(actions['edit-link']),\n\t\t\t\toneSelected && !isShapeLocked && menuItem(actions['duplicate']),\n\t\t\t\tallowGroup && !isShapeLocked && menuItem(actions['group']),\n\t\t\t\tallowUngroup && !isShapeLocked && menuItem(actions['ungroup']),\n\t\t\t\toneSelected && menuItem(actions['toggle-lock'])\n\t\t\t),\n\t\t\tmenuGroup(\n\t\t\t\t'modify',\n\t\t\t\t(twoSelected || onlyFlippableShapeSelected) &&\n\t\t\t\t\tmenuSubmenu(\n\t\t\t\t\t\t'arrange',\n\t\t\t\t\t\t'context-menu.arrange',\n\t\t\t\t\t\ttwoSelected &&\n\t\t\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t\t\t'align',\n\t\t\t\t\t\t\t\tmenuItem(actions['align-left']),\n\t\t\t\t\t\t\t\tmenuItem(actions['align-center-horizontal']),\n\t\t\t\t\t\t\t\tmenuItem(actions['align-right']),\n\t\t\t\t\t\t\t\tmenuItem(actions['align-top']),\n\t\t\t\t\t\t\t\tmenuItem(actions['align-center-vertical']),\n\t\t\t\t\t\t\t\tmenuItem(actions['align-bottom'])\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\tthreeSelected &&\n\t\t\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t\t\t'distribute',\n\t\t\t\t\t\t\t\tmenuItem(actions['distribute-horizontal']),\n\t\t\t\t\t\t\t\tmenuItem(actions['distribute-vertical'])\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\ttwoSelected &&\n\t\t\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t\t\t'stretch',\n\t\t\t\t\t\t\t\tmenuItem(actions['stretch-horizontal']),\n\t\t\t\t\t\t\t\tmenuItem(actions['stretch-vertical'])\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\tonlyFlippableShapeSelected &&\n\t\t\t\t\t\t\t!isShapeLocked &&\n\t\t\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t\t\t'flip',\n\t\t\t\t\t\t\t\tmenuItem(actions['flip-horizontal']),\n\t\t\t\t\t\t\t\tmenuItem(actions['flip-vertical'])\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\ttwoSelected &&\n\t\t\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t\t\t'order',\n\t\t\t\t\t\t\t\tmenuItem(actions['pack'], { disabled: !twoSelected }),\n\t\t\t\t\t\t\t\tthreeStackableItems && menuItem(actions['stack-vertical']),\n\t\t\t\t\t\t\t\tthreeStackableItems && menuItem(actions['stack-horizontal'])\n\t\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\toneSelected &&\n\t\t\t\t\t!isShapeLocked &&\n\t\t\t\t\tmenuSubmenu(\n\t\t\t\t\t\t'reorder',\n\t\t\t\t\t\t'context-menu.reorder',\n\t\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t\t'reorder',\n\t\t\t\t\t\t\tmenuItem(actions['bring-to-front']),\n\t\t\t\t\t\t\tmenuItem(actions['bring-forward']),\n\t\t\t\t\t\t\tmenuItem(actions['send-backward']),\n\t\t\t\t\t\t\tmenuItem(actions['send-to-back'])\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\toneSelected && !isShapeLocked && menuCustom('MOVE_TO_PAGE_MENU', { readonlyOk: false })\n\t\t\t),\n\t\t\tmenuGroup(\n\t\t\t\t'clipboard-group',\n\t\t\t\toneSelected && !isShapeLocked && menuItem(actions['cut']),\n\t\t\t\toneSelected && menuItem(actions['copy']),\n\t\t\t\tshowMenuPaste && menuItem(actions['paste'])\n\t\t\t),\n\t\t\tatLeastOneShapeOnPage &&\n\t\t\t\tmenuGroup(\n\t\t\t\t\t'conversions',\n\t\t\t\t\tmenuSubmenu(\n\t\t\t\t\t\t'copy-as',\n\t\t\t\t\t\t'context-menu.copy-as',\n\t\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t\t'copy-as-group',\n\t\t\t\t\t\t\tmenuItem(actions['copy-as-svg']),\n\t\t\t\t\t\t\thasClipboardWrite && menuItem(actions['copy-as-png']),\n\t\t\t\t\t\t\tmenuItem(actions['copy-as-json'])\n\t\t\t\t\t\t),\n\t\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t\t'export-bg',\n\t\t\t\t\t\t\tmenuItem(actions['toggle-transparent'], { checked: !isTransparentBg })\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tmenuSubmenu(\n\t\t\t\t\t\t'export-as',\n\t\t\t\t\t\t'context-menu.export-as',\n\t\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t\t'export-as-group',\n\t\t\t\t\t\t\tmenuItem(actions['export-as-svg']),\n\t\t\t\t\t\t\tmenuItem(actions['export-as-png']),\n\t\t\t\t\t\t\tmenuItem(actions['export-as-json'])\n\t\t\t\t\t\t),\n\t\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t\t'export-bg,',\n\t\t\t\t\t\t\tmenuItem(actions['toggle-transparent'], { checked: !isTransparentBg })\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\tatLeastOneShapeOnPage &&\n\t\t\t\tmenuGroup(\n\t\t\t\t\t'set-selection-group',\n\t\t\t\t\tmenuItem(actions['select-all']),\n\t\t\t\t\toneSelected && menuItem(actions['select-none'])\n\t\t\t\t),\n\t\t\toneSelected && !isShapeLocked && menuGroup('delete-group', menuItem(actions['delete'])),\n\t\t])\n\n\t\tif (overrides) {\n\t\t\tcontextTLUiMenuSchema = overrides(editor, contextTLUiMenuSchema, {\n\t\t\t\tactions,\n\t\t\t\toneSelected,\n\t\t\t\ttwoSelected,\n\t\t\t\tthreeSelected,\n\t\t\t\tshowAutoSizeToggle,\n\t\t\t\tshowUngroup: allowUngroup,\n\t\t\t\tonlyFlippableShapeSelected,\n\t\t\t})\n\t\t}\n\n\t\treturn contextTLUiMenuSchema\n\t}, [\n\t\teditor,\n\t\toverrides,\n\t\tactions,\n\t\toneSelected,\n\t\ttwoSelected,\n\t\tthreeSelected,\n\t\tshowAutoSizeToggle,\n\t\tonlyFlippableShapeSelected,\n\t\tatLeastOneShapeOnPage,\n\t\tthreeStackableItems,\n\t\tallowGroup,\n\t\tallowUngroup,\n\t\thasClipboardWrite,\n\t\tshowEditLink,\n\t\t// oneEmbedSelected,\n\t\t// oneEmbeddableBookmarkSelected,\n\t\tisTransparentBg,\n\t\tisShapeLocked,\n\t])\n\n\treturn (\n\t\t<TLUiContextMenuSchemaContext.Provider value={contextTLUiMenuSchema}>\n\t\t\t{children}\n\t\t</TLUiContextMenuSchemaContext.Provider>\n\t)\n})\n\n/** @public */\nexport function useContextMenuSchema(): TLUiMenuSchema {\n\tconst ctx = React.useContext(TLUiContextMenuSchemaContext)\n\n\tif (!ctx) {\n\t\tthrow new Error('useContextMenuSchema must be used inside of a TLUiContextMenuSchemaProvider.')\n\t}\n\n\treturn ctx\n}\n"],
  "mappings": "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",
  "names": ["React", "TLUiContextMenuSchemaProvider", "contextTLUiMenuSchema"]
}
